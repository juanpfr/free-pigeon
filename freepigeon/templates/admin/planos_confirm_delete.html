{% extends "admin/baseadm.html" %}

{% block title %}Excluir Plano - {{ plano.nome }} - Free Pigeon{% endblock %}
{% block header_title %}Excluir Plano{% endblock %}

{% block content %}
<div class="section-container active">
    <div class="confirm-card">

        <div class="confirm-header">
            <div class="confirm-icon danger">
                <span>!</span>
            </div>
            <div class="confirm-header-text">
                <h3>Tem certeza que deseja excluir este plano?</h3>
                <p>
                    Essa ação é irreversível. Usuários vinculados a este plano serão movidos
                    automaticamente para o <strong>plano gratuito padrão</strong>.
                </p>
            </div>
        </div>

        <div class="confirm-box">
            <div class="confirm-info">
                <p class="confirm-label">Plano selecionado</p>
                <p class="confirm-name">{{ plano.nome }}</p>

                <p><strong>Slug:</strong> {{ plano.slug }}</p>

                <p>
                    <strong>Preço:</strong>
                    {% if plano.preco_mensal == 0 %}
                        Grátis
                    {% else %}
                        R$ {{ plano.preco_mensal|floatformat:2 }}
                    {% endif %}
                </p>

                <p>
                    <strong>Limite de anúncios:</strong>
                    {% if not plano.limite_anuncios or plano.limite_anuncios == 0 %}
                        Ilimitado
                    {% else %}
                        {{ plano.limite_anuncios }}
                    {% endif %}
                </p>

                <p>
                    <strong>Plano padrão:</strong>
                    {% if plano.is_default %}
                        <span class="badge badge-success">Sim</span>
                    {% else %}
                        <span class="badge badge-neutral">Não</span>
                    {% endif %}
                </p>
            </div>
        </div>

        {% if plano.is_default %}
            <div class="confirm-box" style="border-color:#b91c1c;">
                <p style="color:#b91c1c; font-size:14px;">
                    Este é o <strong>plano gratuito padrão</strong>.  
                    Ele <strong>não pode ser excluído</strong>.
                </p>
            </div>

            <div class="confirm-actions">
                <a href="{% url 'admin_planos' %}" class="btn-cancel confirm-btn-secondary">
                    Voltar
                </a>
            </div>

        {% else %}
            <form method="post" action="{% url 'admin_excluir_plano' plano.id %}">
                {% csrf_token %}
                <div class="confirm-actions">
                    <a href="{% url 'admin_planos' %}"
                       class="btn-cancel confirm-btn-secondary">
                        Cancelar
                    </a>
                    <button type="submit" class="btn-save btn-danger">
                        Confirmar exclusão
                    </button>
                </div>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}
